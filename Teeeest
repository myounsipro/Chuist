import org.junit.jupiter.api.Test;

import java.util.Map;

import static org.junit.jupiter.api.Assertions.*;

class NumberValueTooHighExceptionTest {

    @Test
    void shouldBuildExceptionWithCorrectMessageAndParameters() {
        // Arrange
        String field = "amount";
        String max = "1000";
        String value = "1500";

        NumberValueTooHighException ex = NumberValueTooHighException.builder()
                .field(field)
                .maxValue(max)
                .value(value)
                .build();

        // Act & Assert
        assertEquals("Value of field \"amount\" must be at most 1000 but was 1500", ex.getMessage());

        assertEquals("1000", ex.parameters().get("max"));
        assertEquals("1500", ex.parameters().get("value"));

        assertEquals(AssertionErrorType.NUMBER_VALUE_TOO_HIGH, ex.type());
    }

    @Test
    void messageBuilder_shouldReturnExpectedFormat() {
        var builder = NumberValueTooHighException.builder()
                .field("testField")
                .maxValue("10")
                .value("42");

        String expected = "Value of field \"testField\" must be at most 10 but was 42";
        assertEquals(expected, builder.message());
    }
}