import org.junit.jupiter.api.Test;

import java.util.Map;

import static org.junit.jupiter.api.Assertions.*;

class NumberValueTooLowExceptionTest {

    @Test
    void shouldBuildExceptionWithCorrectMessageAndParameters() {
        // Given
        String field = "quantity";
        String min = "5";
        String value = "2";

        NumberValueTooLowException ex = NumberValueTooLowException.builder()
                .field(field)
                .minValue(min)
                .value(value)
                .build();

        // Then
        assertEquals("Value of field \"quantity\" must be at least 5 but was 2", ex.getMessage());

        Map<String, String> params = ex.parameters();
        assertEquals("5", params.get("min"));
        assertEquals("2", params.get("value"));

        assertEquals(AssertionErrorType.NUMBER_VALUE_TOO_LOW, ex.type());
    }

    @Test
    void builderShouldFormatMessageCorrectly() {
        var builder = NumberValueTooLowException.builder()
                .field("score")
                .minValue("10")
                .value("3");

        String expectedMessage = "Value of field \"score\" must be at least 10 but was 3";
        assertEquals(expectedMessage, builder.message());
    }
}