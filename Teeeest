import { FilteredInvoiceComponent } from './filtered-invoice.component';
import { of } from 'rxjs';

describe('FilteredInvoiceComponent', () => {
  let component: FilteredInvoiceComponent;
  let invoiceServiceMock: any;

  beforeEach(() => {
    invoiceServiceMock = {
      getFilteredInvoices: jest.fn()
    };

    component = new FilteredInvoiceComponent(
      invoiceServiceMock,
      {} as any, // fileService
      {} as any, // snackbar
      {} as any  // documentService
    );

    component.invoices = {
      set: jest.fn()
    } as any;
  });

  it('should set invoices from response', () => {
    const mockResponse = { invoices: [{ id: 1 }, { id: 2 }] };
    invoiceServiceMock.getFilteredInvoices.mockReturnValue(of(mockResponse));

    component.searchInvoices();

    expect(component.invoices.set).toHaveBeenCalledWith(mockResponse.invoices);
  });
});